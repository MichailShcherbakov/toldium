# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type User {
  id: UUID!
  name: String!
  email: String!
  avatarURL: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""uuid type"""
scalar UUID

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Member {
  id: UUID!
  createdAt: DateTime!
  updatedAt: DateTime!
  channelId: UUID!
  channel: Channel!
  userId: UUID!
  user: User!
}

type Message {
  id: UUID!
  content: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  memberId: UUID!
  member: Member!
  channelId: UUID!
  channel: Channel!
}

type Channel {
  id: UUID!
  name: String!
  desc: String
  avatarURL: String
  kind: String!
  memberLimit: Int!
  createdAt: DateTime!
  updatedAt: DateTime!
  unread: Int!
  lastMessageId: UUID
  lastMessage: Message
}

type Tokens {
  accessToken: String!
  refreshToken: String!
}

type Query {
  whoAmI: User!
  getUsers: [User!]!
  getUserById(userId: UUID!): User
  getMessagesByChannelId(channelId: UUID!): [Message!]!
  getChannelById(channelId: String!): Channel
  getChannels: [Channel!]!
  getMembersByChannelId(channelId: UUID!): [Member!]!
}

type Mutation {
  signIn(signInInput: SignInInput!): Tokens!
  signUp(signUpInput: SignUpInput!): User!

  """Use for web apps"""
  refreshTokensWeb: Tokens!

  """Use for mobile apps"""
  refreshTokensMobile(refreshToken: String!): Tokens!
  signOut(refreshToken: String!): Boolean!
  createMessage(createMessageInput: CreateMessageInput!): Message!
}

input SignInInput {
  email: String!
  password: String!
}

input SignUpInput {
  name: String!
  email: String!
  password: String!
  avatarURL: String
}

input CreateMessageInput {
  channelId: UUID!
  memberId: UUID!
  content: String!
}

type Subscription {
  onMessageAdded: Message!
}